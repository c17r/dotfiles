#!/usr/bin/env bash

if [ ! "$1" ]; then cat <<HELP
Usage: $(basename "$0") <twitch username>
HELP
exit; fi

[ -d ~/Applications/VLC.app ] && vlc=~/Applications/VLC.app/Contents/MacOS/VLC
[ -d /Applications/VLC.app ] && vlc=/Applications/VLC.app/Contents/MacOS/VLC

[ -z "$vlc" ] && echo "couldn't find VLC, exiting..." && exit 1

level=best
[ "$2" ] && level=$2

livestreamer twitch.tv/$1 $level -p "$vlc --auhal-volume 128 --network-caching 8000 --file-caching 8000" --player-http -v --hls-segment-threads 4 &
